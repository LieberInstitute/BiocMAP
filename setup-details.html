<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Setup Details | BiocMAP</title>
  <meta name="description" content="2 Setup Details | BiocMAP" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Setup Details | BiocMAP" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Setup Details | BiocMAP" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="quick-start.html"/>
<link rel="next" href="command-opts.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cite-biocmap"><i class="fa fa-check"></i>Cite <code>BiocMAP</code></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-session-information"><i class="fa fa-check"></i>R session information</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i><b>1</b> Quick Start</a>
<ul>
<li class="chapter" data-level="1.1" data-path="quick-start.html"><a href="quick-start.html#setup"><i class="fa fa-check"></i><b>1.1</b> Setup</a></li>
<li class="chapter" data-level="1.2" data-path="quick-start.html"><a href="quick-start.html#quick-config"><i class="fa fa-check"></i><b>1.2</b> Configuration</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="quick-start.html"><a href="quick-start.html#your-main-script"><i class="fa fa-check"></i><b>1.2.1</b> Your “main” script</a></li>
<li class="chapter" data-level="1.2.2" data-path="quick-start.html"><a href="quick-start.html#your-config-file"><i class="fa fa-check"></i><b>1.2.2</b> Your config file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup-details.html"><a href="setup-details.html"><i class="fa fa-check"></i><b>2</b> Setup Details</a>
<ul>
<li class="chapter" data-level="2.1" data-path="setup-details.html"><a href="setup-details.html#requirements"><i class="fa fa-check"></i><b>2.1</b> Requirements</a></li>
<li class="chapter" data-level="2.2" data-path="setup-details.html"><a href="setup-details.html#installation"><i class="fa fa-check"></i><b>2.2</b> Installation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="setup-details.html"><a href="setup-details.html#troubleshooting"><i class="fa fa-check"></i><b>2.2.1</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="setup-details.html"><a href="setup-details.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.3</b> Run the Pipeline</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="setup-details.html"><a href="setup-details.html#run-in-a-slurm-environment-cluster"><i class="fa fa-check"></i><b>2.3.1</b> Run in a SLURM environment/ cluster</a></li>
<li class="chapter" data-level="2.3.2" data-path="setup-details.html"><a href="setup-details.html#run-on-a-sun-grid-engines-sge-cluster"><i class="fa fa-check"></i><b>2.3.2</b> Run on a Sun Grid Engines (SGE) cluster</a></li>
<li class="chapter" data-level="2.3.3" data-path="setup-details.html"><a href="setup-details.html#run-locally"><i class="fa fa-check"></i><b>2.3.3</b> Run locally</a></li>
<li class="chapter" data-level="2.3.4" data-path="setup-details.html"><a href="setup-details.html#run-on-the-jhpce-cluster"><i class="fa fa-check"></i><b>2.3.4</b> Run on the JHPCE cluster</a></li>
<li class="chapter" data-level="2.3.5" data-path="setup-details.html"><a href="setup-details.html#example-main-script"><i class="fa fa-check"></i><b>2.3.5</b> Example main script</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="setup-details.html"><a href="setup-details.html#sharing"><i class="fa fa-check"></i><b>2.4</b> Sharing the pipeline with many users</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="setup-details.html"><a href="setup-details.html#customizing-execution-for-each-user"><i class="fa fa-check"></i><b>2.4.1</b> Customizing execution for each user</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="command-opts.html"><a href="command-opts.html"><i class="fa fa-check"></i><b>3</b> All Command Options</a>
<ul>
<li class="chapter" data-level="3.1" data-path="command-opts.html"><a href="command-opts.html#biocmap-options"><i class="fa fa-check"></i><b>3.1</b> BiocMAP Options</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="command-opts.html"><a href="command-opts.html#mandatory-parameters"><i class="fa fa-check"></i><b>3.1.1</b> Mandatory Parameters</a></li>
<li class="chapter" data-level="3.1.2" data-path="command-opts.html"><a href="command-opts.html#optional-parameters"><i class="fa fa-check"></i><b>3.1.2</b> Optional Parameters</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="command-opts.html"><a href="command-opts.html#next-opts"><i class="fa fa-check"></i><b>3.2</b> Nextflow Options</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipeline-overview.html"><a href="pipeline-overview.html"><i class="fa fa-check"></i><b>4</b> Pipeline Overview</a>
<ul>
<li class="chapter" data-level="4.1" data-path="pipeline-overview.html"><a href="pipeline-overview.html#preparation-steps"><i class="fa fa-check"></i><b>4.1</b> Preparation Steps</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="pipeline-overview.html"><a href="pipeline-overview.html#downloading-and-preparing-required-annotation-files"><i class="fa fa-check"></i><b>4.1.1</b> Downloading and preparing required annotation files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="pipeline-overview.html"><a href="pipeline-overview.html#main-workflow-steps-first-module"><i class="fa fa-check"></i><b>4.2</b> Main Workflow Steps: First Module</a></li>
<li class="chapter" data-level="4.3" data-path="pipeline-overview.html"><a href="pipeline-overview.html#main-workflow-steps-second-module"><i class="fa fa-check"></i><b>4.3</b> Main Workflow Steps: Second Module</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="annotation.html"><a href="annotation.html"><i class="fa fa-check"></i><b>5</b> Annotation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="annotation.html"><a href="annotation.html#default-annotation"><i class="fa fa-check"></i><b>5.1</b> Default Annotation</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="annotation.html"><a href="annotation.html#choosing-a-release"><i class="fa fa-check"></i><b>5.1.1</b> Choosing a release</a></li>
<li class="chapter" data-level="5.1.2" data-path="annotation.html"><a href="annotation.html#choosing-build"><i class="fa fa-check"></i><b>5.1.2</b> Choosing a “build”</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="annotation.html"><a href="annotation.html#custom-annotation"><i class="fa fa-check"></i><b>5.2</b> Custom Annotation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="inputs.html"><a href="inputs.html"><i class="fa fa-check"></i><b>6</b> Inputs</a>
<ul>
<li class="chapter" data-level="6.1" data-path="inputs.html"><a href="inputs.html#the-samples.manifest-file"><i class="fa fa-check"></i><b>6.1</b> The <code>samples.manifest</code> File</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="inputs.html"><a href="inputs.html#what-samples.manifest-should-look-like"><i class="fa fa-check"></i><b>6.1.1</b> What <code>samples.manifest</code> should look like</a></li>
<li class="chapter" data-level="6.1.2" data-path="inputs.html"><a href="inputs.html#more-details-regarding-inputs"><i class="fa fa-check"></i><b>6.1.2</b> More details regarding inputs</a></li>
<li class="chapter" data-level="6.1.3" data-path="inputs.html"><a href="inputs.html#creating-a-manifest-file"><i class="fa fa-check"></i><b>6.1.3</b> Creating a manifest file</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="inputs.html"><a href="inputs.html#the-rules.txt-file"><i class="fa fa-check"></i><b>6.2</b> The <code>rules.txt</code> File</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="inputs.html"><a href="inputs.html#what-rules.txt-should-look-like"><i class="fa fa-check"></i><b>6.2.1</b> What <code>rules.txt</code> should look like</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="outputs.html"><a href="outputs.html"><i class="fa fa-check"></i><b>7</b> Outputs</a>
<ul>
<li class="chapter" data-level="7.1" data-path="outputs.html"><a href="outputs.html#main-outputs"><i class="fa fa-check"></i><b>7.1</b> Main Outputs</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="outputs.html"><a href="outputs.html#cpg-bsseq-object"><i class="fa fa-check"></i><b>7.1.1</b> CpG <em>bsseq</em> object</a></li>
<li class="chapter" data-level="7.1.2" data-path="outputs.html"><a href="outputs.html#cph-bsseq-object"><i class="fa fa-check"></i><b>7.1.2</b> CpH <em>bsseq</em> object</a></li>
<li class="chapter" data-level="7.1.3" data-path="outputs.html"><a href="outputs.html#storage-method"><i class="fa fa-check"></i><b>7.1.3</b> Storage method</a></li>
<li class="chapter" data-level="7.1.4" data-path="outputs.html"><a href="outputs.html#metrics"><i class="fa fa-check"></i><b>7.1.4</b> Metrics</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="outputs.html"><a href="outputs.html#intermediary-outputs"><i class="fa fa-check"></i><b>7.2</b> Intermediary Outputs</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="outputs.html"><a href="outputs.html#first-module"><i class="fa fa-check"></i><b>7.2.1</b> First Module</a></li>
<li class="chapter" data-level="7.2.2" data-path="outputs.html"><a href="outputs.html#second-module"><i class="fa fa-check"></i><b>7.2.2</b> Second Module</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="configuration.html"><a href="configuration.html"><i class="fa fa-check"></i><b>8</b> Configuration</a>
<ul>
<li class="chapter" data-level="8.1" data-path="configuration.html"><a href="configuration.html#specifying-options-for-your-cluster"><i class="fa fa-check"></i><b>8.1</b> Specifying Options for your Cluster</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="configuration.html"><a href="configuration.html#time"><i class="fa fa-check"></i><b>8.1.1</b> Time</a></li>
<li class="chapter" data-level="8.1.2" data-path="configuration.html"><a href="configuration.html#cluster-specific-options"><i class="fa fa-check"></i><b>8.1.2</b> Cluster-specific options</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="configuration.html"><a href="configuration.html#biocmap-settings"><i class="fa fa-check"></i><b>8.2</b> BiocMAP settings</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="configuration.html"><a href="configuration.html#annotation-settings"><i class="fa fa-check"></i><b>8.2.1</b> Annotation settings</a></li>
<li class="chapter" data-level="8.2.2" data-path="configuration.html"><a href="configuration.html#arioc-settings"><i class="fa fa-check"></i><b>8.2.2</b> Arioc settings</a></li>
<li class="chapter" data-level="8.2.3" data-path="configuration.html"><a href="configuration.html#miscellaneous-settings"><i class="fa fa-check"></i><b>8.2.3</b> Miscellaneous settings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i><b>9</b> Software</a>
<ul>
<li class="chapter" data-level="9.1" data-path="software.html"><a href="software.html#software-versions"><i class="fa fa-check"></i><b>9.1</b> Software Versions</a></li>
<li class="chapter" data-level="9.2" data-path="software.html"><a href="software.html#docker-images"><i class="fa fa-check"></i><b>9.2</b> Docker Images</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>10</b> Help</a>
<ul>
<li class="chapter" data-level="10.1" data-path="help.html"><a href="help.html#common-errors"><i class="fa fa-check"></i><b>10.1</b> Common Errors</a></li>
<li class="chapter" data-level="10.2" data-path="help.html"><a href="help.html#resuming"><i class="fa fa-check"></i><b>10.2</b> Resuming</a></li>
<li class="chapter" data-level="10.3" data-path="help.html"><a href="help.html#docker-help"><i class="fa fa-check"></i><b>10.3</b> Docker help</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BiocMAP</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="setup-details" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Setup Details<a href="setup-details.html#setup-details" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="requirements" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Requirements<a href="setup-details.html#requirements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>BiocMAP is designed for execution on Linux, and requires the following:</p>
<ul>
<li>Java 8 or later</li>
<li>Access to NVIDIA GPU(s) during installation, locally or via a computing cluster, with recent stable NVIDIA video drivers and CUDA runtime. BiocMAP may also be installed without these, but only the second module will function in this case</li>
<li>(recommended) docker, singularity, or <a href="https://www.anaconda.com/products/individual">Anaconda</a>/ <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a></li>
</ul>
<p>If installing the pipeline locally (see <a href="setup-details.html#installation">installation</a>), the following are also required:</p>
<ul>
<li>Python 3 (tested with 3.7.3), with pip</li>
<li>R (tested with R 3.6-4.3)</li>
<li>GNU make</li>
</ul>
<p>If installing the pipeline for use with docker (see <a href="setup-details.html#installation">installation</a>), the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker">NVIDIA container toolkit</a> is also required for use of the first module. A CUDA runtime &gt;= 10.1 is required for docker/singularity users.</p>
<p>Additionally, installation via the “local” or “conda” modes (see below) require a C compiler, such as GCC. An up-to-date version of <code>gcc</code> is often required to ensure R packages get properly installed.</p>
</div>
<div id="installation" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Installation<a href="setup-details.html#installation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>BiocMAP makes use of a number of different additional software tools. The user is provided four installation “modes” to automatically manage these dependencies: “docker”, “singularity”, “conda”, or “local” (which we recommend in descending order).</p>
<ul>
<li><p><em>Docker</em>: The recommended option is to manage software with docker, if it is available. From within the repository, perform the one-time setup by running <code>bash install_software.sh "docker"</code>. This installs nextflow and sets up some test files. When running BiocMAP, the required docker images are automatically pulled if not already present, and components of the pipeline run within the associated containers. A full list of the images that are used is <a href="software.html#docker-images">here</a>. If root permissions are needed to run docker, one can instruct the installation script to use <code>sudo</code> in front of any docker commands by running <code>bash install_software.sh "docker" "sudo"</code>. Finally, if using BiocMAP on a cluster, set the <code>arioc_queue</code> <a href="configuration.html#arioc-settings">Arioc setting</a> in <a href="quick-start.html#your-config-file">your config file</a> for the first module.</p></li>
<li><p><em>Singularity</em>: If <code>singularity</code> is available, a user may run <code>bash install_software.sh "singularity"</code> to install BiocMAP. This installs nextflow and sets up some test files. When running BiocMAP, the required docker images are automatically pulled if not already present, and components of the pipeline run within the associated containers using singularity. A full list of the images that are used is <a href="software.html#docker-images">here</a>. Next, if using BiocMAP on a cluster, set the <code>arioc_queue</code> <a href="configuration.html#arioc-settings">Arioc setting</a> in <a href="quick-start.html#your-config-file">your config file</a> for the first module.</p></li>
<li><p><em>Conda</em>: If <code>conda</code> is available (through <code>Anaconda</code> or <code>Miniconda</code>), a user can run <code>bash install_software.sh "conda"</code> to fully install BiocMAP. This creates a conda environment within which the required software is locally installed, and sets up some test files. Note that this is a one-time procedure even on a shared machine (new users automatically make use of the installed conda environment). Finally, if using BiocMAP on a cluster, set the <code>arioc_queue</code> <a href="configuration.html#arioc-settings">Arioc setting</a> in <a href="quick-start.html#your-config-file">your config file</a> for the first module.</p></li>
<li><p><em>Local install</em>: Installation is performed by running <code>bash install_software.sh "local"</code> from within the repository. This installs nextflow, several bioinformatics tools, R and packages, and sets up some test files. A full list of software used is <a href="software.html#software">here</a>. The script <code>install_software.sh</code> builds each software tool from source, and hence relies on some common utilities which are often pre-installed in many unix-like systems:</p>
<ul>
<li>A C/C++ compiler, such as <a href="https://gcc.gnu.org/">GCC</a> or <a href="http://clang.llvm.org/index.html">Clang</a></li>
<li>The GNU <code>make</code> utility</li>
<li>The <code>makeinfo</code> utility</li>
<li><a href="https://git-scm.com/">git</a>, for downloading some software from their GitHub repositories</li>
<li>The <code>unzip</code> utility</li>
</ul>
<p>Please note that this installation method is experimental, and can be more error-prone than installation via the “docker”, “singularity”, or “conda” modes. Finally, if using BiocMAP on a cluster, set the <code>arioc_queue</code> <a href="configuration.html#arioc-settings">Arioc setting</a> in <a href="quick-start.html#your-config-file">your config file</a> for the first module.</p></li>
</ul>
<p><strong>Note:</strong> users at the JHPCE cluster do not need to worry about managing software via the above methods (required software is automatically available through modules). Simply run <code>bash install_software.sh "jhpce"</code> to install any missing R packages and set up some test files. Next, make sure you have the following lines added to your <code>~/.bashrc</code> file:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="setup-details.html#cb7-1" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="va">$HOSTNAME</span> <span class="ot">==</span> compute-<span class="pp">*</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb7-2"><a href="setup-details.html#cb7-2" tabindex="-1"></a>    <span class="ex">module</span> use /jhpce/shared/jhpce/modulefiles/libd</span>
<span id="cb7-3"><a href="setup-details.html#cb7-3" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
<div id="troubleshooting" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Troubleshooting<a href="setup-details.html#troubleshooting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some users may encounter errors during the installation process, particularly when installing software locally. We provide a list below of the most common installation-related issues.</p>
<p>BiocMAP has been tested on:</p>
<ul>
<li>CentOS 7 (Linux)</li>
<li>Ubuntu 18.04 (Linux)</li>
</ul>
<div id="cuda-runtime-is-not-installed" class="section level4 hasAnchor" number="2.2.1.1">
<h4><span class="header-section-number">2.2.1.1</span> CUDA runtime is not installed<a href="setup-details.html#cuda-runtime-is-not-installed" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>BiocMAP aligns samples to a reference genome using Arioc, a GPU-based software built with CUDA– we require that the CUDA toolkit is installed. During installation, if you encounter an error message like this:</p>
<pre><code>g++ -std=c++14 -c -Wall -Wno-unknown-pragmas -O3 -m64 -I /include -o CudaCommon/ThrustSpecializations.o CudaCommon/ThrustSpecializations.cpp
In file included from CudaCommon/ThrustSpecializations.cpp:11:0:
CudaCommon/stdafx.h:26:60: fatal error: cuda_runtime.h: No such file or directory
 #include &lt;cuda_runtime.h&gt;               // CUDA runtime API
                                                            ^
compilation terminated.</code></pre>
<p>it’s possible that the CUDA toolkit is not installed (and should be). On a computing cluster, it’s also possible CUDA-related software must be loaded, or is only available on a particular queue (associated with GPU resources). In the former case, check documentation or contact tech support to see if there is a proper way to load the CUDA toolkit for your cluster. For example, if your cluster uses <a href="https://lmod.readthedocs.io/en/latest/">Lmod environment modules</a>, there might be a command like <code>module load cuda</code> that should be run before the BiocMAP installation script. If this works, you’ll need to adjust your configuration file for the first module following the advice <a href="#using_lmod_modules_with_arioc">here</a>. In the latter case, try running the installation script from the queue containing the GPU(s).</p>
</div>
<div id="g-compilation-errors" class="section level4 hasAnchor" number="2.2.1.2">
<h4><span class="header-section-number">2.2.1.2</span> <code>g++</code> compilation errors<a href="setup-details.html#g-compilation-errors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For “conda” or “local” installation methods, <code>g++</code> is used to compile Arioc. If your <code>gcc</code> version is too old, you may encounter errors during the installation process, likely during the step that compiles Arioc. Here is an example of an error message that could occur:</p>
<pre><code>g++: error: unrecognized command line option &#39;-std=c++14&#39;</code></pre>
<p>On a local machine, consider installing a newer <code>gcc</code> and <code>g++</code> (though please note that versions later than 7 cannot compile Arioc!). On a cluster, similar to <a href="setup-details.html#cuda-runtime-is-not-installed">the advice here</a>, contact tech support or your cluster’s documentation to see if there is a way to load particular versions of <code>gcc</code>. If your cluster uses <a href="https://lmod.readthedocs.io/en/latest/">Lmod environment modules</a>, there might be a command like <code>module load gcc</code> that should be run before the BiocMAP installation script. We have successfully used <code>gcc</code> 5.5.0. If this works, you’ll need to adjust your configuration file for the first module following the advice <a href="#using_lmod_modules_with_arioc">here</a>.</p>
</div>
<div id="using-lmod-modules-with-arioc" class="section level4 hasAnchor" number="2.2.1.3">
<h4><span class="header-section-number">2.2.1.3</span> Using Lmod modules with Arioc<a href="setup-details.html#using-lmod-modules-with-arioc" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For users encountering specific issues during installation via the “conda” or “local” modes on a computing cluster (in particular, see <a href="setup-details.html#g-compilation-errors">g++ compilation errors</a> and <a href="setup-details.html#cuda-runtime-is-not-installed">cuda-related errors</a>), loading an Lmod environment module before <a href="setup-details.html#installation">installation</a> with <code>install_software.sh</code> might provide a solution if this is an option. After successful <a href="setup-details.html#installation">installation</a> with <code>install_software.sh</code> while using a module, it will also be necessary to instruct BiocMAP to load this module whenever it performs alignment-related steps.</p>
<p>To do this, locate <a href="quick-start.html#your-config-file">your configuration file</a> for the first module. As an example, if you needed a module called ‘cuda/10.0’ to perform installation, you can add the line <code>module = 'cuda/10.0'</code> in the processes <code>EncodeReference</code>, <code>EncodeReads</code>, and <code>AlignReads</code>. Here is what the modified configuration would look like for the <code>EncodeReference</code> process for SLURM users:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="setup-details.html#cb10-1" tabindex="-1"></a>withName<span class="op">:</span> EncodeReference <span class="op">{</span></span>
<span id="cb10-2"><a href="setup-details.html#cb10-2" tabindex="-1"></a>    cpus <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb10-3"><a href="setup-details.html#cb10-3" tabindex="-1"></a>    memory <span class="op">=</span> <span class="fl">80.</span>GB</span>
<span id="cb10-4"><a href="setup-details.html#cb10-4" tabindex="-1"></a>    queue <span class="op">=</span> params<span class="op">.</span><span class="fu">arioc_queue</span></span>
<span id="cb10-5"><a href="setup-details.html#cb10-5" tabindex="-1"></a>    module <span class="op">=</span> <span class="er">&#39;</span>cuda<span class="op">/</span><span class="fl">10.0</span><span class="er">&#39;</span></span>
<span id="cb10-6"><a href="setup-details.html#cb10-6" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>To load two modules, such as <code>gcc/5.5.0</code> and <code>cuda/10.0</code>, the syntax looks like: <code>module = 'gcc/5.5.0:cuda/10.0'</code>.</p>
</div>
<div id="singularity-issues" class="section level4 hasAnchor" number="2.2.1.4">
<h4><span class="header-section-number">2.2.1.4</span> Singularity Issues<a href="setup-details.html#singularity-issues" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When installing BiocMAP with Singularity (i.e. <code>bash install_software.sh singularity</code>), quite a bit of memory is sometimes required to build the Singularity images from their Docker counterparts, hosted on Docker Hub. Memory-related error messages can widely vary, but an example looks like this:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="setup-details.html#cb11-1" tabindex="-1"></a><span class="ex">INFO:</span>   Creating SIF file...</span>
<span id="cb11-2"><a href="setup-details.html#cb11-2" tabindex="-1"></a><span class="ex">FATAL:</span>   While making image from oci registry: while building SIF from layers: While running mksquashfs: exit status 1: FATAL ERROR:Failed to create thread</span></code></pre></div>
<p>Requesting more memory and reinstalling will solve such issues.</p>
</div>
<div id="java-issues" class="section level4 hasAnchor" number="2.2.1.5">
<h4><span class="header-section-number">2.2.1.5</span> Java Issues<a href="setup-details.html#java-issues" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>With any installation method, the process may fail if Java is not installed or is sufficiently outdated (e.g. &lt; 11). In this case, installing a recent version of Java (Nextflow recommends between 11 and 18) will solve the issue.</p>
<p>Here are some potential pieces of BiocMAP error messages that suggest Java is too outdated or improperly installed:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="setup-details.html#cb12-1" tabindex="-1"></a><span class="ex">NOTE:</span> Nextflow is not tested with Java 1.8.0_262 <span class="at">--</span> It<span class="st">&#39;s recommended the use of version 11 up to 18</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="setup-details.html#cb13-1" tabindex="-1"></a><span class="ex">Error:</span> A JNI error has occurred, please check your installation and try again</span>
<span id="cb13-2"><a href="setup-details.html#cb13-2" tabindex="-1"></a><span class="ex">Exception</span> in thread <span class="st">&quot;main&quot;</span> java.lang.UnsupportedClassVersionError: org/eclipse/jgit/api/errors/GitAPIException has been compiled by a more recent version of the Java Runtime <span class="er">(</span><span class="ex">class</span> file version 55.0<span class="kw">)</span><span class="ex">,</span> this version of the Java Runtime only recognizes class file versions up to 52.0</span></code></pre></div>
</div>
</div>
</div>
<div id="run-the-pipeline" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Run the Pipeline<a href="setup-details.html#run-the-pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The “main” script used to run the pipeline depends on the environment you will run it on.</p>
<div id="run-in-a-slurm-environment-cluster" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Run in a SLURM environment/ cluster<a href="setup-details.html#run-in-a-slurm-environment-cluster" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>(Optional) <strong>Adjust configuration</strong>: hardware resource usage, software versioning, and cluster option choices are specified in <code>conf/first_half_slurm.config</code> and <code>conf/second_half_slurm.config</code>.</li>
<li><strong>Modify the main script and run</strong>: the main scripts are <code>run_first_half_slurm.sh</code> and <code>run_second_half_slurm.sh</code>. Each script may be submitted to the cluster as a job (e.g. <code>sbatch run_first_half_slurm.sh</code>). See the <a href="command-opts.html#command-opts">full list of command-line options</a> for other details about modifying the script for your use-case. To run the complete workflow, it is recommended to first submit <code>run_first_half_slurm.sh</code>, then monitor the output log <code>run_first_half_slurm.log</code> so that <code>run_second_half_slurm.sh</code> may be submitted when the log indicates the first half has completed.</li>
</ul>
<p>See <a href="https://www.nextflow.io/docs/latest/executor.html#slurm">here</a> for Nextflow’s documentation regarding SLURM environments.</p>
</div>
<div id="run-on-a-sun-grid-engines-sge-cluster" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Run on a Sun Grid Engines (SGE) cluster<a href="setup-details.html#run-on-a-sun-grid-engines-sge-cluster" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>(Optional) <strong>Adjust configuration</strong>: hardware resource usage, software versioning, and cluster option choices are specified in <code>conf/first_half_sge.config</code> and <code>conf/second_half_sge.config</code>.</li>
<li><strong>Modify the main script and run</strong>: the main scripts are <code>run_first_half_sge.sh</code> and <code>run_second_half_sge.sh</code>. Each script may be submitted to the cluster as a job (e.g. <code>qsub run_first_half_sge.sh</code>). See the <a href="command-opts.html#command-opts">full list of command-line options</a> for other details about modifying the script for your use-case. To run the complete workflow, it is recommended to first submit <code>run_first_half_sge.sh</code>, then monitor the output log <code>run_first_half_sge.log</code> so that <code>run_second_half_sge.sh</code> may be submitted when the log indicates the first half has completed.</li>
</ul>
<p>See <a href="https://www.nextflow.io/docs/latest/executor.html#sge">here</a> for additional information on nextflow for SGE environments.</p>
</div>
<div id="run-locally" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Run locally<a href="setup-details.html#run-locally" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>(Optional) <strong>Adjust configuration</strong>: hardware resource usage and other configurables are located in <code>conf/first_half_local.config</code> and <code>conf/second_half_local.config</code>.</li>
<li><strong>Modify the main script and run</strong>: the main scripts are <code>run_first_half_local.sh</code> and <code>run_second_half_local.sh</code>. After configuring options for your use-case (See the <a href="command-opts.html#command-opts">full list of command-line options</a>), each script may be run interactively (e.g. <code>bash run_first_half_local.sh</code>).</li>
</ul>
</div>
<div id="run-on-the-jhpce-cluster" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Run on the <a href="https://jhpce.jhu.edu/">JHPCE</a> cluster<a href="setup-details.html#run-on-the-jhpce-cluster" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>(Optional) <strong>Adjust configuration</strong>: default configuration with thoroughly testing hardware resource specification is described within <code>conf/first_half_jhpce.config</code> and <code>conf/second_half_jhpce.config</code>.</li>
<li><strong>Modify the main script and run</strong>: the “main” scripts are <code>run_first_half_jhpce.sh</code> and <code>run_second_half_jhpce.sh</code>. Each script may be submitted to the cluster as a job (e.g. <code>qsub run_first_half_jhpce.sh</code>). See the <a href="command-opts.html#command-opts">full list of command-line options</a> for other details about modifying the script for your use-case. To run the complete workflow, it is recommended to first submit <code>run_first_half_jhpce.sh</code>, then monitor the output log <code>run_first_half_jhpce.log</code> so that <code>run_second_half_jhpce.sh</code> may be submitted when the log indicates the first half has completed.</li>
</ul>
</div>
<div id="example-main-script" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Example main script<a href="setup-details.html#example-main-script" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Below is a full example of a typical main script for the first module, modified from the <code>run_first_half_jhpce.sh</code> script. At the top are some cluster-specific options, recognized by SGE, the grid scheduler at the JHPCE cluster. These are optional, and you may consider adding appropriate options similarly, if you plan to use BiocMAP on a computing cluster.</p>
<p>After the main command, <code>nextflow first_half.nf</code>, each command option can be described line by line:</p>
<ul>
<li><code>--sample "paired"</code>: input samples are paired-end</li>
<li><code>--reference "hg38"</code>: these are human samples, to be aligned to the hg38 reference genome</li>
<li><code>--input "/users/neagles/wgbs_test"</code>: <code>/users/neagles/wgbs_test</code> is a directory that contains the <code>samples.manifest</code> file, describing the samples.</li>
<li><code>--output "/users/neagles/wgbs_test/out"</code>: <code>/users/neagles/wgbs_test/out</code> is the directory (which possibly exists already) where pipeline outputs should be placed.</li>
<li><code>-profile jhpce</code>: configuration of hardware resource usage, and more detailed pipeline settings, is described at <code>conf/jhpce.config</code>, since this is a run using the JHPCE cluster</li>
<li><code>-w "/fastscratch/myscratch/neagles/nextflow_work"</code>: this is a nextflow-specific command option (note the single dash), telling BiocMAP that temporary files for the pipeline run can be placed under <code>/fastscratch/myscratch/neagles/nextflow_work</code>.</li>
<li><code>--trim_mode "force"</code>: this optional argument instructs BiocMAP to trim all samples. Note there are <a href="command-opts.html#command-opts">alternative options</a>.</li>
<li><code>-profile first_half_jhpce</code>: this line, which should typically always be included, tells BiocMAP to use <code>conf/first_half_jhpce.config</code> as the configuration file applicable to this pipeline run.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="setup-details.html#cb14-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb14-2"><a href="setup-details.html#cb14-2" tabindex="-1"></a><span class="co">#$ -l bluejay,mem_free=25G,h_vmem=25G,h_fsize=800G</span></span>
<span id="cb14-3"><a href="setup-details.html#cb14-3" tabindex="-1"></a><span class="co">#$ -o ./run_first_half_jhpce.log</span></span>
<span id="cb14-4"><a href="setup-details.html#cb14-4" tabindex="-1"></a><span class="co">#$ -e ./run_first_half_jhpce.log</span></span>
<span id="cb14-5"><a href="setup-details.html#cb14-5" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb14-6"><a href="setup-details.html#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="setup-details.html#cb14-7" tabindex="-1"></a><span class="ex">module</span> load nextflow</span>
<span id="cb14-8"><a href="setup-details.html#cb14-8" tabindex="-1"></a><span class="bu">export</span> <span class="va">_JAVA_OPTIONS</span><span class="op">=</span><span class="st">&quot;-Xms8g -Xmx10g&quot;</span></span>
<span id="cb14-9"><a href="setup-details.html#cb14-9" tabindex="-1"></a></span>
<span id="cb14-10"><a href="setup-details.html#cb14-10" tabindex="-1"></a><span class="ex">nextflow</span> first_half.nf <span class="dt">\</span></span>
<span id="cb14-11"><a href="setup-details.html#cb14-11" tabindex="-1"></a>    <span class="at">--sample</span> <span class="st">&quot;paired&quot;</span> <span class="dt">\</span></span>
<span id="cb14-12"><a href="setup-details.html#cb14-12" tabindex="-1"></a>    <span class="at">--reference</span> <span class="st">&quot;hg38&quot;</span> <span class="dt">\</span></span>
<span id="cb14-13"><a href="setup-details.html#cb14-13" tabindex="-1"></a>    <span class="at">--input</span> <span class="st">&quot;/users/neagles/wgbs_test&quot;</span> <span class="dt">\</span></span>
<span id="cb14-14"><a href="setup-details.html#cb14-14" tabindex="-1"></a>    <span class="at">--output</span> <span class="st">&quot;/users/neagles/wgbs_test/out&quot;</span> <span class="dt">\</span></span>
<span id="cb14-15"><a href="setup-details.html#cb14-15" tabindex="-1"></a>    <span class="at">-w</span> <span class="st">&quot;/fastscratch/myscratch/neagles/nextflow_work&quot;</span> <span class="dt">\</span></span>
<span id="cb14-16"><a href="setup-details.html#cb14-16" tabindex="-1"></a>    <span class="at">--trim_mode</span> <span class="st">&quot;force&quot;</span> <span class="dt">\</span></span>
<span id="cb14-17"><a href="setup-details.html#cb14-17" tabindex="-1"></a>    <span class="at">-profile</span> first_half_jhpce</span></code></pre></div>
</div>
</div>
<div id="sharing" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Sharing the pipeline with many users<a href="setup-details.html#sharing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A single installation of BiocMAP can be shared among potentially many users. New users can simply copy the appropriate “main” script (determined above) to a different desired directory, and modify the contents as appropriate for the particular experiment. Similarly, a single user can copy the “main” script and modify the copy whenever there is a new experiment/ set of samples to process, reusing a single installation of BiocMAP arbitrarily many times.</p>
<p><strong>Note</strong> It is recommended to use a unique working directory with the <code>-w</code> <a href="command-opts.html#next-opts">option</a> for each experiment. This ensures:</p>
<ul>
<li>BiocMAP resumes from the correct point, if ever stopped while multiple users are running the pipeline</li>
<li>Deleting the work directory (which can take a large amount of disk space) does not affect BiocMAP execution for other users or other experiments</li>
</ul>
<div id="customizing-execution-for-each-user" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Customizing execution for each user<a href="setup-details.html#customizing-execution-for-each-user" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, all users will share the same <a href="configuration.html#configuration">configuration</a>. This likely suffices for many use cases, but alternatively new configuration files can be created. Below we will walk through an example where a new user of a SLURM-based cluster wishes to use an existing BiocMAP installation to run the first module, but wants a personal configuration file to specify different annotation settings.</p>
<ol style="list-style-type: decimal">
<li><strong>Copy the existing configuration to a new file</strong></li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="setup-details.html#cb15-1" tabindex="-1"></a><span class="co">#  Verify we are in the BiocMAP repository</span></span>
<span id="cb15-2"><a href="setup-details.html#cb15-2" tabindex="-1"></a><span class="bu">pwd</span></span>
<span id="cb15-3"><a href="setup-details.html#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="setup-details.html#cb15-4" tabindex="-1"></a><span class="co">#  Create the new configuration file</span></span>
<span id="cb15-5"><a href="setup-details.html#cb15-5" tabindex="-1"></a><span class="fu">cp</span> conf/first_half_slurm.config conf/my_first_half_slurm.config</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><strong>Modify the new file as desired</strong></li>
</ol>
<p>Below we will change the GENCODE release to the older release 25, for human, via the <code>gencode_version_human</code> variable.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode groovy"><code class="sourceCode groovy"><span id="cb16-1"><a href="setup-details.html#cb16-1" tabindex="-1"></a>params <span class="op">{</span>    </span>
<span id="cb16-2"><a href="setup-details.html#cb16-2" tabindex="-1"></a>    <span class="co">//----------------------------------------------------</span></span>
<span id="cb16-3"><a href="setup-details.html#cb16-3" tabindex="-1"></a>    <span class="co">//  Annotation-related settings</span></span>
<span id="cb16-4"><a href="setup-details.html#cb16-4" tabindex="-1"></a>    <span class="co">//----------------------------------------------------</span></span>
<span id="cb16-5"><a href="setup-details.html#cb16-5" tabindex="-1"></a>    </span>
<span id="cb16-6"><a href="setup-details.html#cb16-6" tabindex="-1"></a>    gencode_version_human <span class="op">=</span> <span class="st">&quot;25&quot;</span> <span class="co">// originally was &quot;34&quot;!</span></span>
<span id="cb16-7"><a href="setup-details.html#cb16-7" tabindex="-1"></a>    gencode_version_mouse <span class="op">=</span> <span class="st">&quot;M23&quot;</span></span>
<span id="cb16-8"><a href="setup-details.html#cb16-8" tabindex="-1"></a>    anno_build <span class="op">=</span> <span class="st">&quot;main&quot;</span> <span class="co">// main or primary (main is canonical seqs only)</span></span></code></pre></div>
<p>See <a href="configuration.html#configuration">configuration</a> for details on customizing BiocMAP settings.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Add the new file as a “profile”</strong></li>
</ol>
<p>This involves adding some code to <code>nextflow.config</code>, as shown below.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode groovy"><code class="sourceCode groovy"><span id="cb17-1"><a href="setup-details.html#cb17-1" tabindex="-1"></a>profiles <span class="op">{</span></span>
<span id="cb17-2"><a href="setup-details.html#cb17-2" tabindex="-1"></a>    <span class="co">// Here we&#39;ve named the new profile &quot;my_new_config&quot;, and pointed it to the</span></span>
<span id="cb17-3"><a href="setup-details.html#cb17-3" tabindex="-1"></a>    <span class="co">// file &quot;conf/my_first_half_slurm.config&quot;.</span></span>
<span id="cb17-4"><a href="setup-details.html#cb17-4" tabindex="-1"></a>    my_new_config <span class="op">{</span></span>
<span id="cb17-5"><a href="setup-details.html#cb17-5" tabindex="-1"></a>        includeConfig <span class="st">&#39;conf/my_first_half_slurm.config&#39;</span></span>
<span id="cb17-6"><a href="setup-details.html#cb17-6" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li><strong>Reference the new profile in the “main” script</strong></li>
</ol>
<p>Recall that new users should copy the “main” script and modify the copy as appropriate. In this case, we open a copy of the original <code>run_first_half_slurm.sh</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode groovy"><code class="sourceCode groovy"><span id="cb18-1"><a href="setup-details.html#cb18-1" tabindex="-1"></a>#  At the nextflow command<span class="op">,</span> we change the <span class="st">&#39;-profile&#39;</span> argument at the bottom</span>
<span id="cb18-2"><a href="setup-details.html#cb18-2" tabindex="-1"></a>$ORIG_DIR<span class="op">/</span>Software<span class="op">/</span>bin<span class="op">/</span>nextflow $ORIG_DIR<span class="op">/</span>first_half<span class="op">.</span>nf \</span>
<span id="cb18-3"><a href="setup-details.html#cb18-3" tabindex="-1"></a>    <span class="op">--</span>sample <span class="st">&quot;paired&quot;</span> \</span>
<span id="cb18-4"><a href="setup-details.html#cb18-4" tabindex="-1"></a>    <span class="op">--</span>reference <span class="st">&quot;hg38&quot;</span> \</span>
<span id="cb18-5"><a href="setup-details.html#cb18-5" tabindex="-1"></a>    <span class="op">-</span>profile my_new_config # <span class="kw">this</span> was changed from <span class="st">&quot;-profile first_half_slurm&quot;</span><span class="op">!</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quick-start.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="command-opts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
